(function(c,k,m,p){function b(a,f){this.options=f||{};this.options.scope=this.options.scope||h.Parent;this.options.className=this.options.className||"stick";this.options.top=this.options.top||0;this.element=c(a);this.stick=e.None;this.spacer=c("<div />");this.spacer[0].id=a.id;this.spacer[0].className=a.className;this.spacer[0].style.cssText=a.style.cssText;this.spacer.addClass("stickit-spacer");this.spacer.css({display:"none",visibility:"hidden"});this.spacer.insertAfter(this.element);"static"==
this.element.parent().css("position")&&this.element.parent().css("position","relative");this.bound();this.precalculate();this.store()}function l(){for(var a=0;a<g.length;++a)g[a].locate()}function n(){for(var a=0;a<g.length;++a)g[a].resize();l()}var h={Parent:0,Document:1},e={None:0,Fixed:1,Absolute:2};k.StickScope=h;b.prototype.store=function(){var a=this.element[0];this.origStyle={width:a.style.width,position:a.style.position,left:a.style.left,top:a.style.top,bottom:a.style.bottom,zIndex:a.style.zIndex}};
b.prototype.restore=function(){this.element.css(this.origStyle)};b.prototype.bound=function(){var a=this.element;this.margin={top:parseInt(a.css("margin-top"))||0,bottom:parseInt(a.css("margin-bottom"))||0,left:parseInt(a.css("margin-left"))||0,right:parseInt(a.css("margin-right"))||0};this.parent={border:{bottom:parseInt(a.parent().css("border-bottom-width"))||0}}};b.prototype.precalculate=function(){this.baseTop=this.margin.top+this.options.top;this.basePadding=this.baseTop+this.margin.bottom};
b.prototype.reset=function(){this.stick=e.None;this.spacer.hide();this.spacer.css("width","");this.restore();this.element.removeClass("stick")};b.prototype.setAbsolute=function(){this.stick==e.None&&this.element.addClass("stick");this.stick=e.Absolute;this.element.css({width:this.element.width()+"px",position:"absolute",top:this.origStyle.top,left:this.origStyle.left,bottom:"0","z-index":"99"})};b.prototype.setFixed=function(a){this.stick==e.None&&this.element.addClass("stick");this.stick=e.Fixed;
this.element.css({width:this.element.width()+"px",position:"fixed",top:this.options.top+"px",left:a+"px",bottom:this.origStyle.bottom,"z-index":"100"})};b.prototype.locate=function(){var a=this.element,f=this.spacer;switch(this.stick){case e.Fixed:var d=f[0].getBoundingClientRect(),b=d.top-this.baseTop;0<=b?this.reset():this.options.scope==h.Parent&&(d=a.parent()[0].getBoundingClientRect(),d.bottom-this.parent.border.bottom<=a.outerHeight()+this.basePadding&&this.setAbsolute());break;case e.Absolute:var d=
f[0].getBoundingClientRect(),b=d.top-this.baseTop,c=d.left-this.margin.left;0<=b?this.reset():(d=a.parent()[0].getBoundingClientRect(),d.bottom-this.parent.border.bottom>a.outerHeight()+this.basePadding&&this.setFixed(c));break;default:d=a[0].getBoundingClientRect();b=d.top-this.baseTop;if(0<=b)break;f.height(a.height());f.show();c=d.left-this.margin.left;this.options.scope==h.Document?this.setFixed(c):a.parent()[0].getBoundingClientRect().bottom-this.parent.border.bottom<=a.outerHeight()+this.basePadding?
this.setAbsolute():this.setFixed(c);f.width()||f.width(a.width())}};b.prototype.resize=function(){this.bound();this.precalculate();if(this.stick!=e.None){var a=this.element,b=this.spacer;a.width(b.width());b.height(a.height());this.stick==e.Fixed&&(b=this.spacer[0].getBoundingClientRect().left-this.margin.left,a.css("left",b+"px"))}};var g=[];c.fn.stickit=function(a){this.each(function(){var c=new b(this,a);g.push(c);c.locate()})};c(m).ready(function(){c(k).bind("resize",n);c(k).bind("scroll",l)})})(jQuery,
window,document);